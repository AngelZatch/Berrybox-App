<div class="row justify-content-center">
    <h2 class="admin-tab-title">My Playlists</h2>
    <div class="d-flex playlist-manager">
        <div class="d-flex playlist-space col-9 px-0">
            <div class="col-3 playlists-list p-0" *ngIf="playlists.length > 0">
                <div *ngFor="let playlist of playlists" class="playlists-list-item p-3"
                    [ngClass]="{'active': playlist._id === selectedPlaylist?._id}"
                    (click)="selectPlaylist(playlist._id)">
                    <div class="d-flex">
                        <div class="col">
                            <p class="playlist-name mb-0">{{ playlist.name }} <span *ngIf="playlist.isPrivate"
                                    class="privacy-indicator">Private</span></p>
                            <span class="playlist-info"> {{ playlist.videos.length }} Videos - Last updated
                                {{ playlist.updatedAt | date:'dd/MM/yyyy HH:mm:ss' }}</span>
                        </div>
                        <div class="col-1 p-0 m-auto text-center box-option-button h-100 d-flex" ngbDropdown
                            *ngIf="playlist.isDeletable">
                            <div ngbDropdownToggle class="h-100 d-flex align-items-center w-100" ngbTooltip="Options"
                                placement="left">
                                <svg id="actions-icon" class="m-auto bx-icon bx-icon-sm"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500">
                                    <rect x="183.33" y="183.33" width="133.33" height="133.33" />
                                    <rect x="183.33" y="27.67" width="133.33" height="133.33" />
                                    <rect x="183.33" y="339" width="133.33" height="133.33" />
                                </svg>
                            </div>
                            <div ngbDropdownMenu>
                                <button ngbDropdownItem (click)="openCreateModal(playlist)">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"
                                        class="bx-dropdown-icon" id="edit-icon">
                                        <g>
                                            <path class="cls-1"
                                                d="M363.73,48.85h57.89a0,0,0,0,1,0,0V170.28a0,0,0,0,1,0,0H363.73a6.47,6.47,0,0,1-6.47-6.47V55.32a6.47,6.47,0,0,1,6.47-6.47Z"
                                                transform="translate(742.28 -88.33) rotate(135)" />
                                            <polygon class="cls-1"
                                                points="84.61 413.69 187.31 396.85 101.44 310.99 84.61 413.69" />
                                            <rect class="cls-1" x="114.03" y="181.32" width="284.46" height="121.43"
                                                transform="translate(608.61 231.97) rotate(135)" />
                                        </g>
                                    </svg>
                                    <span>Edit</span>
                                </button>
                                <button ngbDropdownItem (click)="deletePlaylist(playlist)">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"
                                        class="bx-dropdown-icon" id="trash-icon">
                                        <g>
                                            <path class="cls-1"
                                                d="M354.7,444.72H160.16c-10.34,0-18.72-11-18.72-24.66L107.83,123.64H402.6L373.42,420.06C373.42,433.68,365,444.72,354.7,444.72Z" />
                                            <path class="cls-2"
                                                d="M102.54,76.15H407.9a8.59,8.59,0,0,1,8.59,8.59v16.69a0,0,0,0,1,0,0H94a0,0,0,0,1,0,0V84.73A8.59,8.59,0,0,1,102.54,76.15Z" />
                                            <rect class="cls-2" x="202.7" y="55.28" width="105.04" height="41.74"
                                                rx="20.87" />
                                            <rect class="cls-3" x="250.88" y="164.18" width="8.68" height="240"
                                                rx="4.34" />
                                            <rect class="cls-3" x="188.04" y="164.76" width="8.68" height="240"
                                                rx="4.34" transform="translate(-26.71 20) rotate(-5.56)" />
                                            <rect class="cls-3" x="312.42" y="164.76" width="8.68" height="240"
                                                rx="4.34" transform="translate(37.61 -36.96) rotate(7.1)" />
                                        </g>
                                    </svg>
                                    <span>Delete</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="px-2">
                    <button class="btn btn-primary btn-block" (click)="openCreateModal()">
                        Create a playlist
                    </button>
                </div>
            </div>
            <div class="col-9 playlist-videos px-0"
                *ngIf="selectedPlaylist && selectedPlaylist.videos.length > 0; else noVideos">
                <div *ngFor="let video of selectedPlaylist.videos" class="playlist-video-item py-3 d-flex">
                    <app-video-entry class="col-10 p-0" [video]="video"
                        [options]="{'submit': false, 'favorite': false, 'addToPlaylist': false, 'removeFromPlaylist': false}">
                    </app-video-entry>
                    <div class="col-2 d-flex align-items-center justify-content-center">
                        <app-bx-button (click)="removeVideoFromPlaylist(video)"
                            [options]="{'type': 'cancel', 'context': 'danger', 'textDisplay': 'button', 'text': 'Remove'}">
                        </app-bx-button>
                    </div>
                </div>
            </div>
            <ng-template #noVideos>
                <div class="col-9 pt-3 d-flex align-items-center text-center no-videos-indicator">
                    <span class="w-100">There are no videos in this playlist</span>
                </div>
            </ng-template>
        </div>
        <div class="search-space col-3">
            <div class="p-3">
                <form (submit)="searchYouTube()">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Type to search on YouTube..."
                            [(ngModel)]="searchValue" name="searchCriterion">
                        <div class="input-group-append">
                            <button class="btn btn-outline-default" type="submit"
                                [disabled]="canSearch === false">Search</button>
                        </div>
                    </div>
                </form>
            </div>
            <div *ngIf="searchResults" id="results">
                <div *ngIf="!canSearch">
                    <p class="text-muted text-center">Next search available in {{ searchTimeoutValue }} seconds.</p>
                </div>
                <div *ngIf="errorMessage" class="p-4">
                    <app-bx-alert [options]="{'type': 'danger', 'message': errorMessage}"></app-bx-alert>
                </div>
                <app-video-entry *ngFor="let video of searchResults" [video]="video"
                    [options]="{'submit': false, 'favorite': false, 'addToPlaylist': true}"
                    (addedToPlaylist)="addVideoToPlaylist($event)"></app-video-entry>
            </div>
        </div>
    </div>
</div>