<div class="row justify-content-center">
    <h2 class="admin-tab-title">Playlists</h2>
    <div class="d-flex playlist-manager">
        <div class="d-flex playlist-space col-9 px-0">
            <div class="col-3 playlists-list p-0" *ngIf="playlists.length > 0">
                <div id="playlists-list-container">
                    <div *ngFor="let playlist of playlists" class="playlists-list-item p-3"
                        [ngClass]="{'active': playlist._id === selectedPlaylist?._id}"
                        (click)="selectPlaylist(playlist._id)">
                        <div class="d-flex">
                            <div class="col">
                                <p class="playlist-name mb-0">{{ playlist.name }} <span *ngIf="playlist.isPrivate"
                                        class="privacy-indicator">Private</span></p>
                                <span class="playlist-info"> {{ playlist.videos.length }} Videos - Last updated
                                    {{ playlist.updatedAt | date:'dd/MM/yyyy HH:mm:ss' }}</span>
                            </div>
                            <div class="col-1 p-0 m-auto text-center h-100 d-flex" ngbDropdown container="body"
                                *ngIf="playlist.isDeletable">
                                <div ngbDropdownToggle>
                                    <img class="actions-icon" style="height: 30px; width: 30px;">
                                </div>
                                <div ngbDropdownMenu>
                                    <button ngbDropdownItem (click)="openCreateModal(playlist)">
                                        <img alt="" class="bx-dropdown-icon edit-icon">
                                        <span>Edit</span>
                                    </button>
                                    <button ngbDropdownItem (click)="deletePlaylist(playlist)">
                                        <img alt="" class="bx-dropdown-icon trash-icon">
                                        <span>Delete</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="px-2">
                    <button class="btn btn-primary btn-block" (click)="openCreateModal()">
                        Create a playlist
                    </button>
                </div>
            </div>
            <div class="col-9 playlist-videos px-0"
                *ngIf="selectedPlaylist && selectedPlaylist.videos.length > 0; else noVideos">
                <div *ngFor="let video of selectedPlaylist.videos" class="playlist-video-item py-3 d-flex">
                    <app-video-entry class="col-10 p-0" [video]="video"
                        [options]="{'submit': false, 'favorite': false, 'addToPlaylist': false, 'removeFromPlaylist': false}">
                    </app-video-entry>
                    <div class="col-2 d-flex align-items-center justify-content-center">
                        <app-bx-button (click)="removeVideoFromPlaylist(video)"
                            [options]="{'type': 'cancel', 'context': 'danger', 'textDisplay': 'button', 'text': 'Remove'}">
                        </app-bx-button>
                    </div>
                </div>
            </div>
            <ng-template #noVideos>
                <div class="col-9 pt-3 d-flex align-items-center text-center no-videos-indicator">
                    <span class="w-100">There are no videos in this playlist</span>
                </div>
            </ng-template>
        </div>
        <div class="search-space col-3">
            <div class="p-3">
                <form (submit)="searchYouTube()">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Type to search on YouTube..."
                            [(ngModel)]="searchValue" name="searchCriterion">
                        <div class="input-group-append">
                            <button class="btn btn-outline-default" type="submit"
                                [disabled]="canSearch === false">Search</button>
                        </div>
                    </div>
                </form>
            </div>
            <div *ngIf="searchResults" id="results">
                <div *ngIf="!canSearch">
                    <p class="text-muted text-center">Next search available in {{ searchTimeoutValue }} seconds.</p>
                </div>
                <div *ngIf="errorMessage" class="p-4">
                    <app-bx-alert [options]="{'type': 'danger', 'message': errorMessage}"></app-bx-alert>
                </div>
                <app-video-entry *ngFor="let video of searchResults" [video]="video"
                    [options]="{'submit': false, 'favorite': false, 'addToPlaylist': true}"
                    (addedToPlaylist)="addVideoToPlaylist($event)"></app-video-entry>
            </div>
        </div>
    </div>
</div>