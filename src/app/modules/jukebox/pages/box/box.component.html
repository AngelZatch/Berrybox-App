<div *ngIf="!loading && connectionStatus === 'success'">
    <div class="box-space row no-gutters">
        <div class="col-lg-9 col-sm-6 d-flex flex-column h-100">
            <app-player *ngIf="box && currentVideo" [boxToken]="box._id" style="height: 100%; width: 100%;">
            </app-player>
            <div class="row under-player">
                <div class="col-5 box-info">
                    <div class="d-flex">
                        <div class="bb-box-picture d-flex align-items-center justify-content-center mr-2">
                            <app-profile-picture [userId]="box?.creator?._id" [size]="'md'"></app-profile-picture>
                        </div>
                        <div class="bb-box-info w-100">
                            <div id="box-title-space">
                                <div id="box-title">
                                    <app-box-status-indicator [isOpen]="box?.open" class="mr-2">
                                    </app-box-status-indicator>
                                    <span class="box-title" title="{{box.name}}">{{ box.name }}</span>
                                </div>
                                <div class="d-flex align-items-center" ngbTooltip="Settings" *appAcl="'editBox'"
                                    (click)="openBoxSettings()">
                                    <svg class="berrybox-svg" style="height: 1.4em;" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 550 550">
                                        <rect class="berrybox-path" x="205.98" y="50.17" width="138.04" height="56" />
                                        <rect class="berrybox-path" x="205.98" y="445.83" width="138.04" height="56" />
                                        <rect class="berrybox-path" x="374.83" y="143.92" width="138.04" height="56"
                                            transform="translate(359.31 -296.5) rotate(58.6)" />
                                        <rect class="berrybox-path" x="37.12" y="350.08" width="138.04" height="56"
                                            transform="translate(373.54 90.48) rotate(58.6)" />
                                        <rect class="berrybox-path" x="372.85" y="353.26" width="138.04" height="56"
                                            transform="translate(1000.81 213.34) rotate(122.49)" />
                                        <rect class="berrybox-path" x="39.11" y="140.74" width="138.04" height="56"
                                            transform="translate(308.54 168.16) rotate(122.49)" />
                                        <path class="berrybox-path"
                                            d="M275,79.67C167.12,79.67,79.67,167.12,79.67,275S167.12,470.33,275,470.33,470.33,382.88,470.33,275,382.88,79.67,275,79.67Zm0,297.72A102.39,102.39,0,1,1,377.39,275,102.39,102.39,0,0,1,275,377.39Z" />
                                    </svg>
                                </div>
                            </div>
                            <div class="col d-flex flex-row flex-wrap align-items-center p-0">
                                <div class="mr-2">
                                    <svg class="berrybox-svg-icon crown" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 500 500" title="Administrator">
                                        <rect x="29.61" y="209.46" width="440.78" height="181.69" />
                                        <polygon points="250 53.84 148.6 229.46 351.4 229.46 250 53.84" />
                                        <polygon points="470.39 54.84 368.99 230.46 470.39 230.46 470.39 54.84" />
                                        <polygon points="131.01 230.46 29.61 54.84 29.61 230.46 131.01 230.46" />
                                    </svg>
                                    <span class="ml-1">{{ box?.creator?.name }}</span>
                                </div>
                                <app-bx-chip [options]="{'type': 'random'}" [display]="'icon'"
                                    *ngIf="box?.options?.random"></app-bx-chip>
                                <app-bx-chip [options]="{'type': 'loop'}" [display]="'icon'" *ngIf="box?.options?.loop">
                                </app-bx-chip>
                                <app-bx-chip [options]="{'type': 'lock'}" [display]="'icon'" *ngIf="box?.private">
                                </app-bx-chip>
                                <app-bx-chip [options]="{'type': 'no-coin'}" *ngIf="!box?.options?.berries">
                                </app-bx-chip>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-7 video-info m-auto" *ngIf="currentVideo">
                    <div class="row">
                        <div class="col-lg-10 col-md-8 d-flex justify-content-start align-items-center">
                            <img *ngIf="currentVideo?.stateForcedWithBerries"
                                src="../../../../../assets/images/icons/berry-coin-icon.svg" alt=""
                                style="height: 30px;" class="pr-2"
                                ngbTooltip="This video is playing thanks to the use of berries.">
                            <p class="video-title" title="{{currentVideo?.video.name}}">{{currentVideo?.video.name}}</p>
                        </div>
                        <div class="col-lg-2 col-md-4 text-right" *appAuth="true">
                            <app-bx-button *appAcl="'skipVideo'" (click)="skipVideo()"
                                [options]="{'type': 'skip', 'textDisplay': 'tooltip', 'context': 'queue'}" class="mr-2">
                            </app-bx-button>
                            <span *appAcl="'!skipVideo'">
                                <app-bx-button *ngIf="box?.options?.berries" (click)="skipVideo()"
                                    [options]="{'type': 'skip', 'textDisplay': 'tooltip', 'context': 'berries', 'text': 'Spend 30 berries to skip'}"
                                    class="mr-2">
                                </app-bx-button>
                            </span>
                            <app-bx-button *ngIf="currentVideo" (click)="addToPlaylist()"
                                [options]="{'type': 'addToLibrary', 'textDisplay': 'tooltip', 'text': 'Add to a Playlist', 'context': 'queue'}">
                            </app-bx-button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-9">
                            <span class="minor-text">Submitted by {{ currentVideo?.submitted_by?.name }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <app-panel class="col-lg-3 col-sm-6" id="room-panel" #panel [boxToken]="box._id"></app-panel>
    </div>
</div>